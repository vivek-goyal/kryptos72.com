!function(t){"use strict";t.redux=t.redux||{},t(document).ready(function(){t.redux.wbc_importer()}),t.redux.wbc_importer=function(){t(".wrap-importer.theme.not-imported, #wbc-importer-reimport").unbind("click").on("click",function(t){function r(t){t.action="redux_wbc_importer_progress",0==s?jQuery.ajax({url:ajaxurl,data:t,success:function(o){var i=jQuery.parseJSON(o);if(o.length>0&&"object"==typeof i){var n=Math.floor(i.imported_count/i.total_post*100);n=n>0?n-1:n,e.find(".wbc-progress-bar").css("width",n+"%"),e.find(".wbc-progress-count").text(n+"%"),setTimeout(function(){r(t)},4e3)}}}):e.find(".wbc-progress-back").remove()}t.preventDefault();var e=jQuery(this),o=!1,i="Import Demo Content?";if("wbc-importer-reimport"==t.target.id&&(o=!0,i="Re-Import Content?",jQuery(this).hasClass("rendered")||(e=jQuery(this).parents(".wrap-importer"))),!e.hasClass("imported")||0!=o){var n=confirm(i);if(0!=n){1==o&&e.removeClass("active imported").addClass("not-imported"),e.find(".spinner").css("display","inline-block"),e.removeClass("active imported"),e.find(".importer-button").hide();var a=jQuery(this).data(),s=!1;return a.action="redux_wbc_importer",a.demo_import_id=e.attr("data-demo-id"),a.nonce=e.attr("data-nonce"),a.type="import-demo-content",a.wbc_import=1==o?"re-importing":" ",e.find(".wbc_image").css("opacity","0.5"),jQuery.post(ajaxurl,a).success(function(t){if(e.find(".wbc_image").css("opacity","1"),e.find(".spinner").css("display","none"),t.length>0&&t.match(/Have fun!/gi)){if(0==o){e.addClass("rendered").find(".wbc-importer-buttons .importer-button").removeClass("import-demo-data");var i='<div id="wbc-importer-reimport" class="wbc-importer-buttons button-primary import-demo-data importer-button">Re-Import</div>';e.find(".theme-actions .wbc-importer-buttons").append(i)}e.find(".importer-button:not(#wbc-importer-reimport)").removeClass("button-primary").addClass("button").text("Imported").show(),e.find(".importer-button").attr("style",""),e.addClass("imported active").removeClass("not-imported"),s=!0,r(a),location.reload(!0)}else e.find(".import-demo-data").show(),1==o&&(e.find(".importer-button:not(#wbc-importer-reimport)").removeClass("button-primary").addClass("button").text("Imported").show(),e.find(".importer-button").attr("style",""),e.addClass("imported active").removeClass("not-imported")),s=!0,alert("There was an error importing demo content: \n\n"+t.replace(/(<([^>]+)>)/gi,""))}).fail(function(t){e.find(".wbc_image").css("opacity","1"),e.find(".spinner").css("display","none"),e.find(".import-demo-data").show(),1==o&&(e.find(".importer-button:not(#wbc-importer-reimport)").removeClass("button-primary").addClass("button").text("Imported").show(),e.find(".importer-button").attr("style",""),e.addClass("imported active").removeClass("not-imported")),s=!0,alert("There was an error importing demo content.")}),e.prepend('<div class="wbc-progress-back"><div class="wbc-progress-bar button-primary"><span class="wbc-progress-count">0%</span></div>'),r(a),!1}}})}}(jQuery);